<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>مشاهدة - Thunder Anime ⚡</title>
  <link rel="stylesheet" href="style.css" />
  <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
</head>
<body class="player-body">
  <div class="player-container">
    <video id="video" controls autoplay></video>
    <div id="loading">جاري تحميل الحلقة ⚡ ...</div>
  </div>

  <script>
    const urlParams = new URLSearchParams(window.location.search);
    const megaUrl = urlParams.get('url');

    if (megaUrl && Hls.isSupported()) {
      const video = document.getElementById('video');
      const hls = new Hls();
      hls.loadSource(`https://megastream.vercel.app/api/stream?url=${megaUrl}`);
      hls.attachMedia(video);
      hls.on(Hls.Events.MANIFEST_PARSED, () => {
        document.getElementById('loading').style.display = 'none';
        video.play();
      });
    } else {
      document.getElementById('loading').innerText = "المتصفح لا يدعم التشغيل";
    }
  </script>
</body>
</html>
